<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <style>
    html {
      font-size: 10px; /* This is to match petabox's base font size */
    }
    
    .container {
      margin: 0 50px;
      position: relative;
    }

    #btn {
      margin: 50px;
    }
    .iaux-search-widget {
      position: absolute;
      left: 0;
    }
  </style>
 
</head>
<body>
  <script type="module" src="../dist/src/components/iaux-search-widget.js"></script>

  <button id="btn">Advanced Option</button>

  <div class="container">
    <iaux-search-widget open class="iaux-search-widget"></iaux-search-widget>
  </div>

  <script>
    let param = decodeURIComponent(window.location.search);
    param = new URLSearchParams(param).get("query") ;

    // param = 'title%3A"hello+world"+AND+creator%3A"hello"+AND+mediatype%3A"audio"';

    
    let searchComponent = document.querySelector('iaux-search-widget');
    if (!searchComponent) {
      searchComponent = document.createElement("iaux-search-widget");
    }
    searchComponent.queryParam = param
    searchComponent.open = true;

    const btn = document.querySelector('#btn');
    btn.addEventListener('click', () => {
      searchComponent.open = !searchComponent.open;
    })

    // searchWidgetClosed
    searchComponent.addEventListener('searchWidgetClosed', (e) => {
      searchComponent.open = false;
      console.log('searchClosed', e);
    });

    searchComponent.addEventListener('searchWidgetApplied', (e) => {
      console.log('searchApplied', e);
    })
  </script>
</body>
</html>
